<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWS VPC Exam Prep App</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f9;
            color: #333;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        h1 {
            text-align: center;
            color: #ff9900;
        }
        .learning-section, .simulator-section {
            margin-bottom: 30px;
        }
        .learning-section h2, .simulator-section h2 {
            font-size: 1.4em;
            color: #007bff;
            margin-bottom: 15px;
        }
        .concept-card, .simulator-form {
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-bottom: 10px;
            overflow: hidden;
        }
        .concept-header {
            background: #f8f9fa;
            padding: 15px;
            cursor: pointer;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .concept-header:hover {
            background: #e9ecef;
        }
        .concept-content {
            padding: 15px;
            display: none;
            background: #fff;
        }
        .concept-content p {
            margin: 0 0 10px;
        }
        .concept-content strong {
            color: #155724;
        }
        .simulator-form {
            padding: 15px;
            background: #f8f9fa;
        }
        .simulator-form label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        .simulator-form input, .simulator-form select {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .simulator-feedback {
            margin-top: 10px;
            padding: 10px;
            border-radius: 5px;
            display: none;
        }
        .simulator-feedback.success {
            background: #d4edda;
            color: #155724;
        }
        .simulator-feedback.error {
            background: #f8d7da;
            color: #721c24;
        }
        .progress {
            margin-bottom: 20px;
            text-align: center;
        }
        .progress-bar {
            width: 100%;
            background: #ddd;
            height: 20px;
            border-radius: 10px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: #28a745;
            width: 0;
            transition: width 0.3s;
        }
        .question {
            margin-bottom: 20px;
            font-size: 1.1em;
        }
        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .option {
            padding: 12px;
            background: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.2s;
        }
        .option:hover {
            background: #e9ecef;
        }
        .option.selected {
            background: #007bff;
            color: #fff;
        }
        .option.correct {
            background-color: #d4edda !important;
            color: #155724 !important;
            border-color: #c3e6cb !important;
        }
        .option.incorrect-selection {
            background-color: #f8d7da !important;
            color: #721c24 !important;
            border-color: #f5c6cb !important;
        }
        .feedback {
            margin-top: 10px;
            padding: 15px;
            border-radius: 5px;
            display: none;
            font-size: 0.95em;
            line-height: 1.5;
        }
        .feedback strong {
            display: block;
            margin-bottom: 8px;
            font-size: 1em;
        }
        .feedback ul {
            margin: 0;
            padding-left: 20px;
        }
        .feedback li {
            margin-bottom: 5px;
        }
        .correct {
            background: #d4edda;
            color: #155724;
        }
        .incorrect {
            background: #f8d7da;
            color: #721c24;
        }
        button {
            padding: 10px 20px;
            background: #ff9900;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            display: block;
            margin: 10px auto;
            font-size: 1em;
        }
        button:hover {
            background: #e68a00;
        }
        .restart {
            background: #dc3545;
        }
        .restart:hover {
            background: #c82333;
        }
        .history {
            margin-top: 20px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 5px;
        }
        .history h2 {
            font-size: 1.2em;
            margin-bottom: 10px;
        }
        .history ul {
            list-style: none;
            padding: 0;
        }
        .history li {
            padding: 5px 0;
        }
        @media (max-width: 600px) {
            .container {
                padding: 10px;
            }
            button {
                width: 100%;
            }
            .question {
                font-size: 1em;
            }
            .feedback {
                padding: 10px;
                font-size: 0.9em;
            }
            .feedback strong {
                font-size: 0.95em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>AWS VPC Exam Prep App</h1>
        <div class="learning-section">
            <h2>Learn AWS VPC Concepts</h2>
            <div class="concept-card">
                <div class="concept-header">VPC Fundamentals<span>▼</span></div>
                <div class="concept-content">
                    <p><strong>What is a VPC?</strong> A Virtual Private Cloud (VPC) is an isolated virtual network in AWS where you can launch resources like EC2 instances. You define its IP range (CIDR block), subnets, and tenancy (default or dedicated).</p>
                    <p><strong>Use Case:</strong> Hosting a web application with public and private subnets for secure resource placement.</p>
                    <p><strong>Exam Tip:</strong> Know how to choose CIDR blocks (e.g., 10.0.0.0/16) and understand the difference between default and custom VPCs. Default VPCs are pre-configured for ease of use.</p>
                </div>
            </div>
            <div class="concept-card">
                <div class="concept-header">Subnets and Routing<span>▼</span></div>
                <div class="concept-content">
                    <p><strong>What are Subnets?</strong> Subnets divide a VPC’s IP range into smaller segments, each in one Availability Zone. Public subnets have routes to an Internet Gateway; private subnets do not.</p>
                    <p><strong>Routing:</strong> Route tables control traffic, directing 0.0.0.0/0 to Internet Gateways, NAT Gateways, or other targets.</p>
                    <p><strong>Use Case:</strong> Deploying EC2 instances in private subnets with a NAT Gateway for outbound internet access, while web servers are in public subnets.</p>
                    <p><strong>Exam Tip:</strong> Understand public vs. private subnets and how to configure route tables for high availability across Availability Zones. Each subnet must be associated with a route table.</p>
                </div>
            </div>
            <div class="concept-card">
                <div class="concept-header">Security Groups and Network ACLs<span>▼</span></div>
                <div class="concept-content">
                    <p><strong>Security Groups (SGs):</strong> Stateful firewalls at the ENI/instance level. They allow traffic based on rules (e.g., allow HTTP on port 80). All outbound traffic is allowed by default. Deny rules are not supported (implicit deny).</p>
                    <p><strong>Network ACLs (NACLs):</strong> Stateless firewalls at the subnet level. They require explicit inbound and outbound rules (allow or deny). Rules are evaluated in order by number.</p>
                    <p><strong>Use Case:</strong> SGs for fine-grained instance access control (e.g., web server allows port 80/443). NACLs for broader subnet-level defense (e.g., blocking known malicious IPs).</p>
                    <p><strong>Exam Tip:</strong> Key difference: SGs are stateful (return traffic automatically allowed), NACLs are stateless (return traffic must be explicitly allowed). SGs apply to instances, NACLs to subnets.</p>
                </div>
            </div>
            <div class="concept-card">
                <div class="concept-header">Internet Gateways (IGW)<span>▼</span></div>
                <div class="concept-content">
                    <p><strong>What is it?</strong> A horizontally scaled, redundant, and highly available VPC component that allows communication between your VPC and the internet. It's not tied to a specific Availability Zone.</p>
                    <p><strong>Use Case:</strong> Enabling EC2 instances in public subnets to be directly reachable from the internet and to initiate outbound internet connections. Required for NAT Gateways.</p>
                    <p><strong>Exam Tip:</strong> A VPC can only have one IGW attached. A public subnet must have a route to an IGW (e.g., 0.0.0.0/0 -> IGW ID) in its associated route table. Instances in public subnets also need a public IP or Elastic IP.</p>
                </div>
            </div>
            <div class="concept-card">
                <div class="concept-header">NAT Gateways and NAT Instances<span>▼</span></div>
                <div class="concept-content">
                    <p><strong>NAT Gateway:</strong> AWS-managed service providing outbound internet connectivity for instances in private subnets. Highly available within an AZ, place one in each AZ for redundancy. Requires an Elastic IP.</p>
                    <p><strong>NAT Instance:</strong> An EC2 instance in a public subnet configured to perform NAT. Requires manual management (patching, scaling, HA setup). Can be a bastion host too.</p>
                    <p><strong>Use Case:</strong>
                        <strong>NAT Gateway:</strong> For private subnet instances to download updates or access public APIs without being directly exposed to the internet.
                        <strong>NAT Instance:</strong> Older approach, or if specific customizations (e.g., advanced monitoring, port forwarding) are needed beyond NAT Gateway features.
                    </p>
                    <p><strong>Exam Tip:</strong> Prefer NAT Gateways for high availability, scalability, and reduced operational overhead. NAT Instances can be a single point of failure unless you implement custom HA.</p>
                </div>
            </div>
            <div class="concept-card">
                <div class="concept-header">Route Tables In-Depth<span>▼</span></div>
                <div class="concept-content">
                    <p><strong>What is it?</strong> A set of rules, called routes, that determine where network traffic from your subnet or gateway is directed. Each VPC has a main route table (default for subnets not explicitly associated with another). You can create custom route tables.</p>
                    <p><strong>Key Components:</strong> Destination (CIDR block), Target (e.g., IGW, VPG, NAT Gateway, Peering Connection, ENI, VPC Endpoint).</p>
                    <p><strong>Use Case:</strong> Directing internet-bound traffic (0.0.0.0/0) from public subnets to an IGW. Directing internet-bound traffic from private subnets to a NAT Gateway. Routing traffic between peered VPCs.</p>
                    <p><strong>Exam Tip:</strong> Understand route priority: the most specific route matching the traffic's destination always wins. Subnets can only be associated with one route table at a time. The main route table can be modified but not deleted.</p>
                </div>
            </div>
            <div class="concept-card">
                <div class="concept-header">VPC Peering and Endpoints<span>▼</span></div>
                <div class="concept-content">
                    <p><strong>VPC Peering:</strong> Connects two VPCs (same or different regions/accounts) for private communication using private IP addresses, as if they are on the same network. Non-transitive. Requires route table updates in both VPCs.</p>
                    <p><strong>VPC Endpoints:</strong>
                        <strong>Gateway Endpoints:</strong> For S3 and DynamoDB. A gateway specified as a target in your route table. No ENI, no additional cost.
                        <strong>Interface Endpoints (AWS PrivateLink):</strong> For many other AWS services (e.g., Kinesis, EC2 API, KMS) and custom services. Uses an Elastic Network Interface (ENI) in your subnet with a private IP. Incurs cost.
                    </p>
                    <p><strong>Use Case:</strong> Peering for inter-VPC application communication. Endpoints for accessing AWS services privately without internet traversal.</p>
                    <p><strong>Exam Tip:</strong> Peering is not transitive (A-B, B-C doesn't mean A-C). Overlapping CIDRs are not allowed for peering. Know when to use Gateway vs. Interface Endpoints (S3/DynamoDB vs. others).</p>
                </div>
            </div>
            <div class="concept-card">
                <div class="concept-header">Site-to-Site VPN and Connectivity<span>▼</span></div>
                <div class="concept-content">
                    <p><strong>Site-to-Site VPN:</strong> Connects an on-premises network to a VPC using an IPsec encrypted tunnel. Requires a Virtual Private Gateway (VGW) on the AWS side and a Customer Gateway (CGW) on your on-premises side. Supports BGP (dynamic) or static routing.</p>
                    <p><strong>AWS Direct Connect (DX):</strong> Dedicated private network connection from on-premises to AWS. Higher bandwidth, lower latency, more consistent than VPN. Can be partitioned into Virtual Interfaces (VIFs).</p>
                    <p><strong>Transit Gateway (TGW):</strong> Network hub that simplifies connectivity between multiple VPCs and on-premises networks. Acts as a cloud router. Supports transitive routing.</p>
                    <p><strong>Use Case:</strong> VPN for secure, moderate bandwidth to on-premises. DX for high-bandwidth, stable connections. TGW for scaling connectivity across many VPCs/on-prem locations.</p>
                    <p><strong>Exam Tip:</strong> Understand VGW vs CGW roles. BGP is preferred for dynamic route propagation in VPNs. DX provides dedicated bandwidth but is not encrypted by default (can be combined with VPN for encryption). TGW simplifies complex network topologies.</p>
                </div>
            </div>
            <div class="concept-card">
                <div class="concept-header">Elastic IP Addresses (EIPs)<span>▼</span></div>
                <div class="concept-content">
                    <p><strong>What is it?</strong> Static, public IPv4 addresses designed for dynamic cloud computing. You can allocate an EIP to your account and associate it with an EC2 instance, network interface, or NAT Gateway.</p>
                    <p><strong>Use Case:</strong> Providing a fixed, reliable public IP address for a web server, NAT Gateway, or other internet-facing resource. If an instance fails, the EIP can be quickly remapped to a replacement instance.</p>
                    <p><strong>Exam Tip:</strong> EIPs are free when associated with a *running* EC2 instance and have only one EIP associated with it. You are charged for EIPs not associated with a running instance, associated with a stopped instance, or if an instance has multiple EIPs. EIPs are regional resources.</p>
                </div>
            </div>
            <div class="concept-card">
                <div class="concept-header">VPC Flow Logs<span>▼</span></div>
                <div class="concept-content">
                    <p><strong>What is it?</strong> A feature that enables you to capture information about the IP traffic going to and from network interfaces in your VPC. Flow log data can be published to Amazon CloudWatch Logs or Amazon S3.</p>
                    <p><strong>Captured Information:</strong> Source/destination IP, source/destination ports, protocol, packets, bytes, start/end time, action (ACCEPT/REJECT), log status.</p>
                    <p><strong>Use Case:</strong> Monitoring network traffic, troubleshooting connectivity issues (e.g., security group or NACL rule problems), security analysis (detecting anomalous traffic), compliance.</p>
                    <p><strong>Exam Tip:</strong> Flow Logs do *not* capture all traffic (e.g., DNS queries to AmazonProvidedDNS, traffic to instance metadata service, DHCP traffic, traffic to the default VPC router). They operate at the ENI level. You cannot tag flow logs.</p>
                </div>
            </div>
            <div class="concept-card">
                <div class="concept-header">DNS in VPC<span>▼</span></div>
                <div class="concept-content">
                    <p><strong>AmazonProvidedDNS:</strong> AWS DNS server (typically at VPC_CIDR_base + 2, e.g., 10.0.0.2 for a 10.0.0.0/16 VPC). Resolves public DNS hostnames and private DNS hostnames for EC2 instances within the VPC (if enabled).</p>
                    <p><strong>VPC Attributes for DNS:</strong>
                        <code>enableDnsSupport</code>: (Default: true) If true, queries to AmazonProvidedDNS succeed.
                        <code>enableDnsHostnames</code>: (Default: false for custom VPCs, true for default VPCs) If true, instances with public IPs get public DNS hostnames.
                    </p>
                    <p><strong>Route 53 Resolver:</strong> Provides DNS resolution for VPCs and on-premises networks (hybrid DNS). Can create inbound/outbound endpoints to forward DNS queries between VPC and on-prem networks.</p>
                    <p><strong>Use Case:</strong> EC2 instances resolving public domain names or names of other instances. Hybrid cloud DNS resolution. Custom domain names for internal resources with Route 53 private hosted zones.</p>
                    <p><strong>Exam Tip:</strong> Both <code>enableDnsSupport</code> and <code>enableDnsHostnames</code> must be true for instances to get public DNS hostnames that resolve to their public IPs. Understand the role of DHCP Option Sets in configuring DNS servers for a VPC.</p>
                </div>
            </div>
            <div class="concept-card">
                <div class="concept-header">VPC Sharing<span>▼</span></div>
                <div class="concept-content">
                    <p><strong>What is it?</strong> Allows multiple AWS accounts within the same AWS Organization to create their application resources (like EC2 instances, RDS databases, Redshift clusters) into shared, centrally managed VPCs. The VPC owner account shares one or more subnets with participant accounts.</p>
                    <p><strong>Roles:</strong>
                        <strong>Owner:</strong> Owns the VPC and its resources (subnets, route tables, gateways). Shares subnets.
                        <strong>Participant:</strong> Can launch resources into shared subnets. Can view shared resources.
                    </p>
                    <p><strong>Use Case:</strong> Centralized network management, cost optimization by sharing network infrastructure, separation of billing and resource ownership at the account level while using a common network.</p>
                    <p><strong>Exam Tip:</strong> Participants cannot modify the VPC structure (e.g., route tables, NACLs, VPC CIDRs). Security Groups can be referenced across accounts in a shared VPC scenario if peered, but generally SGs are managed by the account launching the resource. VPC sharing does not work across regions.</p>
                </div>
            </div>
        </div>
        <div class="simulator-section">
            <h2>Hands-On VPC Simulator</h2>
            <div class="simulator-form">
                <label for="vpc-cidr">VPC CIDR Block (e.g., 10.0.0.0/16):</label>
                <input type="text" id="vpc-cidr" placeholder="10.0.0.0/16">
                <label for="subnet1-cidr">Public Subnet CIDR (e.g., 10.0.1.0/24):</label>
                <input type="text" id="subnet1-cidr" placeholder="10.0.1.0/24">
                <label for="subnet2-cidr">Private Subnet CIDR (e.g., 10.0.2.0/24):</label>
                <input type="text" id="subnet2-cidr" placeholder="10.0.2.0/24">
                <label for="route-target">Route Table Target for 0.0.0.0/0 (Public Subnet):</label>
                <select id="route-target">
                    <option value="igw">Internet Gateway</option>
                    <option value="nat">NAT Gateway</option>
                    <option value="none">None</option>
                </select>
                <button onclick="validateVPCConfig()">Validate Configuration</button>
                <div class="simulator-feedback" id="simulator-feedback"></div>
            </div>
        </div>
        <div class="progress">
            <p>Progress: <span id="progress-text">0%</span></p>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
        </div>
        <div id="quiz">
            <div class="question" id="question-text"></div>
            <div class="options" id="options"></div>
            <div class="feedback" id="feedback"></div>
            <button id="submit">Submit Answer</button>
            <button id="next" style="display: none;">Next Question</button>
        </div>
        <button id="restart" class="restart" style="display: none;">Restart Quiz</button>
        <div class="history" id="history">
            <h2>Quiz History</h2>
            <ul id="history-list"></ul>
        </div>
    </div>

    <script>
        // VPC Simulator Logic
        function validateVPCConfig() {
            const vpcCidr = document.getElementById('vpc-cidr').value;
            const subnet1Cidr = document.getElementById('subnet1-cidr').value;
            const subnet2Cidr = document.getElementById('subnet2-cidr').value;
            const routeTarget = document.getElementById('route-target').value;
            const feedback = document.getElementById('simulator-feedback');

            feedback.style.display = 'block';
            feedback.className = 'simulator-feedback';

            const cidrRegex = /^(\d{1,3}\.){3}\d{1,3}\/(16|24)$/;
            if (!cidrRegex.test(vpcCidr) || !cidrRegex.test(subnet1Cidr) || !cidrRegex.test(subnet2Cidr)) {
                feedback.classList.add('error');
                feedback.textContent = 'Invalid CIDR format. Use formats like 10.0.0.0/16 for VPC or 10.0.1.0/24 for subnets.';
                return;
            }

            const vpcBase = vpcCidr.split('/')[0].split('.').slice(0, 2).join('.');
            if (!subnet1Cidr.startsWith(vpcBase) || !subnet2Cidr.startsWith(vpcBase)) {
                feedback.classList.add('error');
                feedback.textContent = 'Subnets must be within the VPC CIDR range.';
                return;
            }

            if (subnet1Cidr === subnet2Cidr) {
                feedback.classList.add('error');
                feedback.textContent = 'Subnets must have unique CIDR blocks.';
                return;
            }

            if (routeTarget !== 'igw') {
                feedback.classList.add('error');
                feedback.textContent = 'Public subnet must route 0.0.0.0/0 to an Internet Gateway.';
                return;
            }

            feedback.classList.add('success');
            feedback.textContent = 'Valid VPC configuration! You’ve set up a VPC with a public and private subnet, and the public subnet routes to an Internet Gateway.';
        }

        // Quiz Logic
        const questions = [
            {
                question: "A company needs to establish a secure connection between its on-premises data center and an AWS VPC to enable seamless access to resources. The connection must be encrypted and support dynamic routing protocols. Which configuration should a solutions architect implement to meet these requirements?",
                options: [
                    "Configure a Virtual Private Gateway, a Customer Gateway, and a Site-to-Site VPN connection with static routing.",
                    "Set up an AWS Direct Connect link with a private virtual interface and enable BGP routing.",
                    "Create a Transit Gateway, attach the VPC, and configure a Site-to-Site VPN with dynamic routing.",
                    "Configure a Virtual Private Gateway, a Customer Gateway, and a Site-to-Site VPN connection with BGP routing."
                ],
                correct: 3,
                explanation: {
                    correctText: "Configure a Virtual Private Gateway, a Customer Gateway, and a Site-to-Site VPN connection with BGP routing.",
                    whyCorrect: [
                        "Provides an encrypted IPsec tunnel for secure connectivity.",
                        "Supports BGP for dynamic routing, meeting the requirement.",
                        "Uses standard AWS components (VGW, CGW) for VPC-to-on-premises communication."
                    ],
                    incorrectOptions: [
                        "Option A: Static routing doesn’t support dynamic routing protocols.",
                        "Option B: Direct Connect isn’t inherently encrypted and focuses on bandwidth, not VPN.",
                        "Option C: Transit Gateway is overkill for a single VPC connection and still requires VPN setup."
                    ]
                }
            },
            {
                question: "A solutions architect is designing a VPC for a web application that requires high availability. The application consists of EC2 instances in an Auto Scaling group and an Amazon RDS database. Which VPC configuration ensures high availability across multiple Availability Zones?",
                options: [
                    "Create one public subnet and one private subnet in a single Availability Zone, with an Internet Gateway for public access.",
                    "Create two public subnets and two private subnets across two Availability Zones, with a NAT Gateway in each public subnet for the private subnets.",
                    "Create a single subnet spanning multiple Availability Zones and attach a Virtual Private Gateway for connectivity.",
                    "Create two public subnets in one Availability Zone and two private subnets in another, with a single NAT Gateway."
                ],
                correct: 1,
                explanation: {
                    correctText: "Create two public subnets and two private subnets across two Availability Zones, with a NAT Gateway in each public subnet for the private subnets.",
                    whyCorrect: [
                        "Distributes resources across multiple AZs for high availability.",
                        "Public subnets host web servers; private subnets host RDS and app tiers.",
                        "Redundant NAT Gateways ensure private subnets have reliable outbound access."
                    ],
                    incorrectOptions: [
                        "Option A: Single AZ deployment lacks high availability.",
                        "Option C: Subnets cannot span AZs; invalid configuration.",
                        "Option D: Single NAT Gateway creates a single point of failure."
                    ]
                }
            },
            {
                question: "A company is hosting a web application in a VPC with EC2 instances in a public subnet. The solutions architect needs to allow HTTP traffic from the internet while blocking all other inbound traffic. Which configuration achieves this with the least administrative overhead?",
                options: [
                    "Configure a Network ACL to allow inbound HTTP traffic on port 80 and deny all other inbound traffic.",
                    "Configure a Security Group to allow inbound HTTP traffic on port 80 from 0.0.0.0/0 and associate it with the EC2 instances.",
                    "Create a VPC Endpoint for HTTP traffic and restrict access using IAM policies.",
                    "Configure a Network ACL to allow all inbound traffic and a Security Group to deny non-HTTP traffic."
                ],
                correct: 1,
                explanation: {
                    correctText: "Configure a Security Group to allow inbound HTTP traffic on port 80 from 0.0.0.0/0 and associate it with the EC2 instances.",
                    whyCorrect: [
                        "Security Groups are stateful, simplifying rule management.",
                        "Allows HTTP (port 80) from any source while implicitly denying other traffic.",
                        "Minimal overhead as it’s applied directly to instances."
                    ],
                    incorrectOptions: [
                        "Option A: NACLs are stateless, requiring complex inbound/outbound rules.",
                        "Option C: VPC Endpoints are for AWS services, not general internet HTTP.",
                        "Option D: Allowing all traffic via NACL increases complexity and risk."
                    ]
                }
            },
            {
                question: "A company has two VPCs in the same AWS account and region: VPC-A hosts an application, and VPC-B hosts a database. The application in VPC-A needs to access the database in VPC-B securely using private IP addresses. What is the most cost-effective solution?",
                options: [
                    "Configure a Site-to-Site VPN between VPC-A and VPC-B.",
                    "Set up VPC Peering between VPC-A and VPC-B and update route tables.",
                    "Use an AWS Transit Gateway to connect VPC-A and VPC-B.",
                    "Create a NAT Gateway in VPC-A to route traffic to VPC-B."
                ],
                correct: 1,
                explanation: {
                    correctText: "Set up VPC Peering between VPC-A and VPC-B and update route tables.",
                    whyCorrect: [
                        "Enables private IP communication between VPCs in the same region.",
                        "Cost-effective with no additional service charges.",
                        "Requires only route table updates for connectivity."
                    ],
                    incorrectOptions: [
                        "Option A: Site-to-Site VPN adds unnecessary cost and complexity.",
                        "Option C: Transit Gateway is expensive for simple two-VPC setups.",
                        "Option D: NAT Gateway is for internet access, not inter-VPC communication."
                    ]
                }
            },
            {
                question: "A solutions architect is designing a VPC with EC2 instances in a private subnet that need to access an Amazon S3 bucket for data retrieval. The company requires that traffic to S3 does not traverse the internet for security reasons. What is the best solution to meet this requirement?",
                options: [
                    "Configure a NAT Gateway in a public subnet and update the route table to route S3 traffic.",
                    "Create a Gateway VPC Endpoint for S3 and update the route table to route S3 traffic to the endpoint.",
                    "Set up an Interface VPC Endpoint for S3 and configure security group rules.",
                    "Use a Site-to-Site VPN to connect the private subnet to S3."
                ],
                correct: 1,
                explanation: {
                    correctText: "Create a Gateway VPC Endpoint for S3 and update the route table to route S3 traffic to the endpoint.",
                    whyCorrect: [
                        "Enables private S3 access without internet traversal.",
                        "Free and simple to configure via route table updates.",
                        "Ideal for S3 and DynamoDB private connectivity."
                    ],
                    incorrectOptions: [
                        "Option A: NAT Gateway routes traffic via the internet.",
                        "Option C: Interface Endpoints for S3 are costlier and less common.",
                        "Option D: Site-to-Site VPN is for on-premises, not S3 access."
                    ]
                }
            },
            {
                question: "A company requires instances in a private subnet to access the internet for software updates. The solution must be highly available and require minimal management overhead. Which approach should be used?",
                options: [
                    "Deploy a NAT Instance in a public subnet and configure route tables.",
                    "Deploy a NAT Gateway in a public subnet and configure route tables.",
                    "Configure an Egress-Only Internet Gateway for the private subnet.",
                    "Attach an Internet Gateway directly to the private subnet."
                ],
                correct: 1,
                explanation: {
                    correctText: "Deploy a NAT Gateway in a public subnet and configure route tables.",
                    whyCorrect: [
                        "AWS-managed NAT Gateway is highly available and scalable.",
                        "Requires minimal management compared to NAT Instances.",
                        "Supports private subnet outbound internet access."
                    ],
                    incorrectOptions: [
                        "Option A: NAT Instances require manual HA and maintenance.",
                        "Option C: Egress-Only Internet Gateway is for IPv6 only.",
                        "Option D: Internet Gateway makes subnets public, not suitable."
                    ]
                }
            },
            {
                question: "A security team needs to audit all accepted and rejected TCP/IP traffic for specific EC2 instances in a VPC. Which AWS service should they use to capture this information?",
                options: [
                    "AWS CloudTrail",
                    "Amazon CloudWatch Alarms",
                    "VPC Flow Logs",
                    "AWS Config"
                ],
                correct: 2,
                explanation: {
                    correctText: "VPC Flow Logs",
                    whyCorrect: [
                        "Captures IP traffic details (source/destination, ports, action).",
                        "Logs both accepted and rejected traffic at the ENI level.",
                        "Publishes to CloudWatch Logs or S3 for auditing."
                    ],
                    incorrectOptions: [
                        "Option A: CloudTrail logs API calls, not network traffic.",
                        "Option B: CloudWatch Alarms monitor metrics, not traffic logs.",
                        "Option D: AWS Config tracks configurations, not traffic."
                    ]
                }
            },
            {
                question: "A company hosts a critical web application on an EC2 instance. They need a static public IP address for the application that persists even if the instance is stopped, restarted, or replaced. What should they use?",
                options: [
                    "The instance's default public IP assigned on launch.",
                    "Configure auto-assign public IP for the subnet.",
                    "Allocate and associate an Elastic IP Address (EIP).",
                    "Use a DNS CNAME record pointing to the instance's dynamic public IP."
                ],
                correct: 2,
                explanation: {
                    correctText: "Allocate and associate an Elastic IP Address (EIP).",
                    whyCorrect: [
                        "Provides a static public IPv4 address.",
                        "Persists across instance stop/start or replacement.",
                        "Easily reassigned to new instances if needed."
                    ],
                    incorrectOptions: [
                        "Option A: Default public IPs change on stop/start.",
                        "Option B: Auto-assigned IPs are dynamic, not static.",
                        "Option D: CNAME relies on dynamic IPs that may change."
                    ]
                }
            },
            {
                question: "A new subnet is created in a custom VPC. No custom route table is explicitly associated with this subnet during its creation. Where will the traffic from instances in this new subnet be routed by default?",
                options: [
                    "Directly to the Internet Gateway attached to the VPC.",
                    "According to the rules in the main route table of the VPC.",
                    "No traffic will be routed out of the subnet until a route table is associated.",
                    "To the oldest custom route table created in the VPC."
                ],
                correct: 1,
                explanation: {
                    correctText: "According to the rules in the main route table of the VPC.",
                    whyCorrect: [
                        "Subnets not associated with a custom route table use the VPC’s main route table.",
                        "Main route table includes a local route for VPC-internal traffic by default."
                    ],
                    incorrectOptions: [
                        "Option A: Internet Gateway requires explicit routing.",
                        "Option C: Traffic routes via the main route table, not blocked.",
                        "Option D: No concept of ‘oldest’ route table; main table is used."
                    ]
                }
            },
            {
                question: "A solutions architect wants EC2 instances launched in a custom VPC to automatically receive public DNS hostnames that resolve to their public IP addresses. The instances are launched in a public subnet and have public IPs. Which VPC attribute(s) must be enabled?",
                options: [
                    "`enableDnsSupport` only",
                    "`enableDnsHostnames` only",
                    "Both `enableDnsSupport` and `enableDnsHostnames`",
                    "`enableClassicLinkDnsSupport` and `enableDnsHostnames`"
                ],
                correct: 2,
                explanation: {
                    correctText: "Both `enableDnsSupport` and `enableDnsHostnames`",
                    whyCorrect: [
                        "`enableDnsSupport` allows DNS resolution via AmazonProvidedDNS.",
                        "`enableDnsHostnames` assigns public DNS hostnames to instances with public IPs.",
                        "Both are required for public DNS hostname functionality."
                    ],
                    incorrectOptions: [
                        "Option A: `enableDnsSupport` alone doesn’t assign hostnames.",
                        "Option B: `enableDnsHostnames` alone doesn’t enable DNS resolution.",
                        "Option D: `enableClassicLinkDnsSupport` is for ClassicLink, not relevant."
                    ]
                }
            },
            {
                question: "An organization uses VPC sharing. Account A (owner) owns the VPC and shares a subnet with Account B (participant). What action can Account B perform within the shared subnet?",
                options: [
                    "Modify the route table associated with the shared subnet.",
                    "Launch EC2 instances, RDS instances, and other application resources into the shared subnet.",
                    "Change the CIDR block of the shared subnet.",
                    "Delete the shared subnet from their account's view."
                ],
                correct: 1,
                explanation: {
                    correctText: "Launch EC2 instances, RDS instances, and other application resources into the shared subnet.",
                    whyCorrect: [
                        "Participants can deploy resources in shared subnets.",
                        "Allows separation of resource ownership while using a shared VPC."
                    ],
                    incorrectOptions: [
                        "Option A: Participants cannot modify VPC infrastructure like route tables.",
                        "Option C: CIDR blocks are managed by the owner account.",
                        "Option D: Participants cannot delete shared subnets."
                    ]
                }
            },
            {
                question: "When configuring network security for EC2 instances, a key difference between Security Groups (SGs) and Network ACLs (NACLs) is their statefulness. Which statement accurately describes this?",
                options: [
                    "SGs are stateless, requiring explicit outbound rules for return traffic; NACLs are stateful.",
                    "Both SGs and NACLs are stateless, requiring explicit rules for all traffic.",
                    "SGs are stateful, automatically allowing return traffic for allowed inbound connections; NACLs are stateless, requiring explicit inbound and outbound rules.",
                    "Both SGs and NACLs are stateful, automatically allowing return traffic."
                ],
                correct: 2,
                explanation: {
                    correctText: "SGs are stateful, automatically allowing return traffic for allowed inbound connections; NACLs are stateless, requiring explicit inbound and outbound rules.",
                    whyCorrect: [
                        "SGs automatically allow return traffic for allowed connections.",
                        "NACLs require explicit rules for both directions due to statelessness."
                    ],
                    incorrectOptions: [
                        "Option A: Reverses statefulness; SGs are stateful, NACLs stateless.",
                        "Option B: Incorrect; SGs are stateful, not stateless.",
                        "Option D: Incorrect; NACLs are stateless, not stateful."
                    ]
                }
            },
            {
                question: "A company has peered VPC A with VPC B, and VPC B is also peered with VPC C. Instances in VPC A need to communicate with instances in VPC C using private IPs. How can this be achieved assuming no Transit Gateway is used?",
                options: [
                    "Traffic will automatically route from VPC A to VPC C because peering is transitive.",
                    "A new VPC peering connection must be established directly between VPC A and VPC C, and route tables updated accordingly.",
                    "Configure VPC B's route tables to forward traffic between VPC A and VPC C.",
                    "This scenario is not possible with VPC peering; an Internet Gateway must be used."
                ],
                correct: 1,
                explanation: {
                    correctText: "A new VPC peering connection must be established directly between VPC A and VPC C, and route tables updated accordingly.",
                    whyCorrect: [
                        "VPC peering is non-transitive; direct peering is needed for A-to-C.",
                        "Route table updates enable private IP communication."
                    ],
                    incorrectOptions: [
                        "Option A: Peering is non-transitive; A-to-C needs a direct connection.",
                        "Option C: VPC B cannot forward traffic between A and C.",
                        "Option D: Peering enables private communication; Internet Gateway is unnecessary."
                    ]
                }
            },
            {
                question: "An application running on EC2 instances in a private subnet needs to access AWS Systems Manager (SSM) APIs securely, without traffic traversing the internet. Which AWS networking component should be configured?",
                options: [
                    "A NAT Gateway in a public subnet.",
                    "A VPC Gateway Endpoint for SSM.",
                    "An Interface VPC Endpoint (AWS PrivateLink) for SSM.",
                    "An Internet Gateway attached to the private subnet."
                ],
                correct: 2,
                explanation: {
                    correctText: "An Interface VPC Endpoint (AWS PrivateLink) for SSM.",
                    whyCorrect: [
                        "Enables private access to SSM APIs via an ENI with a private IP.",
                        "Avoids internet traversal, ensuring security."
                    ],
                    incorrectOptions: [
                        "Option A: NAT Gateway routes traffic via the internet.",
                        "Option B: Gateway Endpoints are only for S3 and DynamoDB.",
                        "Option D: Internet Gateway exposes traffic, not suitable for private access."
                    ]
                }
            }
        ];

        let currentQuestion = 0;
        let score = 0;
        let answered = false;
        let quizHistory = JSON.parse(localStorage.getItem('awsVPCQuizHistory')) || [];

        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options');
        const feedback = document.getElementById('feedback');
        const submitButton = document.getElementById('submit');
        const nextButton = document.getElementById('next');
        const restartButton = document.getElementById('restart');
        const progressText = document.getElementById('progress-text');
        const progressFill = document.getElementById('progress-fill');
        const historyList = document.getElementById('history-list');

        // Learning Section: Toggle concept cards
        document.querySelectorAll('.concept-header').forEach(header => {
            header.addEventListener('click', () => {
                const content = header.nextElementSibling;
                const isVisible = content.style.display === 'block';
                content.style.display = isVisible ? 'none' : 'block';
                header.querySelector('span').textContent = isVisible ? '▼' : '▲';
            });
        });

        function loadQuestion() {
            answered = false;
            window.selectedOption = undefined;
            const q = questions[currentQuestion];
            questionText.textContent = q.question;
            optionsContainer.innerHTML = '';
            q.options.forEach((option, index) => {
                const div = document.createElement('div');
                div.classList.add('option');
                div.textContent = option;
                div.addEventListener('click', () => selectOption(index, div));
                optionsContainer.appendChild(div);
            });
            feedback.style.display = 'none';
            feedback.className = 'feedback';
            submitButton.style.display = 'block';
            nextButton.style.display = 'none';
            updateProgress();
        }

        function selectOption(index, element) {
            if (answered) return;
            document.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
            element.classList.add('selected');
            window.selectedOption = index;
        }

        function submitAnswer() {
            if (window.selectedOption === undefined) {
                alert("Please select an answer before submitting.");
                return;
            }
            if (answered) return;
            answered = true;
            const q = questions[currentQuestion];
            feedback.style.display = 'block';
            feedback.innerHTML = ''; // Clear previous content
            if (window.selectedOption === q.correct) {
                feedback.classList.add('correct');
                feedback.innerHTML = `
                    <strong>Correct Answer:</strong> ${q.explanation.correctText}<br>
                    <strong>Why It’s Correct:</strong>
                    <ul>
                        ${q.explanation.whyCorrect.map(item => `<li>${item}</li>`).join('')}
                    </ul>
                    <strong>Why Others Are Wrong:</strong>
                    <ul>
                        ${q.explanation.incorrectOptions.map(item => `<li>${item}</li>`).join('')}
                    </ul>
                `;
                score++;
            } else {
                feedback.classList.add('incorrect');
                feedback.innerHTML = `
                    <strong>Incorrect. Correct Answer:</strong> ${q.explanation.correctText}<br>
                    <strong>Why It’s Correct:</strong>
                    <ul>
                        ${q.explanation.whyCorrect.map(item => `<li>${item}</li>`).join('')}
                    </ul>
                    <strong>Why Others Are Wrong:</strong>
                    <ul>
                        ${q.explanation.incorrectOptions.map(item => `<li>${item}</li>`).join('')}
                    </ul>
                `;
                optionsContainer.children[q.correct].classList.add('correct');
                if (optionsContainer.children[window.selectedOption].classList.contains('selected')) {
                    optionsContainer.children[window.selectedOption].classList.add('incorrect-selection');
                }
            }
            submitButton.style.display = 'none';
            nextButton.style.display = 'block';
            saveProgress();
        }

        function nextQuestion() {
            currentQuestion++;
            if (currentQuestion < questions.length) {
                loadQuestion();
            } else {
                saveQuizHistory();
                showResults();
            }
        }

        function showResults() {
            questionText.textContent = `Quiz Completed! You scored ${score} out of ${questions.length}.`;
            optionsContainer.innerHTML = '';
            feedback.style.display = 'none';
            submitButton.style.display = 'none';
            nextButton.style.display = 'none';
            restartButton.style.display = 'block';
            progressText.textContent = `100%`;
            progressFill.style.width = `100%`;
            localStorage.removeItem('awsVPCQuizProgress');
            updateHistory();
        }

        function updateProgress() {
            const progressPercentage = (currentQuestion / questions.length) * 100;
            progressText.textContent = `${Math.round(progressPercentage)}%`;
            progressFill.style.width = `${progressPercentage}%`;
        }

        function saveProgress() {
            if (currentQuestion < questions.length) {
                localStorage.setItem('awsVPCQuizProgress', JSON.stringify({
                    currentQuestion,
                    score
                }));
            }
        }

        function saveQuizHistory() {
            const date = new Date().toLocaleString();
            quizHistory.push({ date, score: `${score}/${questions.length}` });
            if (quizHistory.length > 10) {
                quizHistory.shift();
            }
            localStorage.setItem('awsVPCQuizHistory', JSON.stringify(quizHistory));
        }

        function updateHistory() {
            historyList.innerHTML = '';
            [...quizHistory].reverse().forEach(entry => {
                const li = document.createElement('li');
                li.textContent = `${entry.date}: Score ${entry.score}`;
                historyList.appendChild(li);
            });
        }

        function loadProgress() {
            const saved = localStorage.getItem('awsVPCQuizProgress');
            if (saved) {
                const { currentQuestion: savedQuestion, score: savedScore } = JSON.parse(saved);
                if (savedQuestion < questions.length) {
                    currentQuestion = savedQuestion;
                    score = savedScore;
                    loadQuestion();
                } else {
                    showResults();
                }
            } else {
                loadQuestion();
            }
            updateHistory();
        }

        function restartQuiz() {
            localStorage.removeItem('awsVPCQuizProgress');
            currentQuestion = 0;
            score = 0;
            answered = false;
            window.selectedOption = undefined;
            restartButton.style.display = 'none';
            submitButton.style.display = 'block';
            loadQuestion();
        }

        submitButton.addEventListener('click', submitAnswer);
        nextButton.addEventListener('click', nextQuestion);
        restartButton.addEventListener('click', restartQuiz);

        loadProgress();
    </script>
</body>
</html>